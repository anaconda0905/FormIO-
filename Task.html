<html>

<head>
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'>
  <link rel='stylesheet' href='https://unpkg.com/formiojs@3.9.0/dist/formio.full.min.css'>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/themes/prism-okaidia.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script type="text/javascript"
    src="https://unpkg.com/@fonticonpicker/fonticonpicker/dist/js/jquery.fonticonpicker.min.js"></script>
  <link rel="stylesheet" type="text/css"
    href="https://unpkg.com/@fonticonpicker/fonticonpicker/dist/css/base/jquery.fonticonpicker.min.css">

  <link rel="stylesheet" type="text/css"
    href="https://unpkg.com/@fonticonpicker/fonticonpicker/dist/css/themes/bootstrap-theme/jquery.fonticonpicker.bootstrap.min.css">
  <link rel="stylesheet" type="text/css"
    href="https://unpkg.com/@fonticonpicker/fonticonpicker/dist/css/themes/dark-grey-theme/jquery.fonticonpicker.darkgrey.min.css">

  <link rel="stylesheet" type="text/css"
    href="https://unpkg.com/@fonticonpicker/fonticonpicker/dist/css/themes/grey-theme/jquery.fonticonpicker.grey.min.css">
  <link rel="stylesheet" type="text/css"
    href="https://unpkg.com/@fonticonpicker/fonticonpicker/dist/css/themes/inverted-theme/jquery.fonticonpicker.inverted.min.css">
  <!-- icons -->
  <link rel="stylesheet" href="icomoon/style.css">
  <link rel="stylesheet" href="fontello-7275ca86/css/fontello.css">
  <script src="demo.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>

  <script src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://unpkg.com/formiojs@3.9.0/dist/formio.full.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-json.min.js"></script>
  
  

  <style>
    body {
      padding: 20px;
    }

    .tab-content.container {
      border: 1px solid #ddd;
      border-top: none;
      padding-top: 15px;
      padding-bottom: 15px;
    }

    pre {
      height: 450px;
      overflow-y: scroll;
    }

    body {
      padding: 20px;
    }

    .switch {
      position: relative;
      display: inline-block;
      width: 70px;
      height: 34px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: white;
      border: 1px solid lightgray;
      -webkit-transition: .4s;
      transition: .4s;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 3px;
      background-color: lightgray;
      -webkit-transition: .4s;
      transition: .4s;
    }

    input:checked+.slider {
      background-color: whtie;
    }

    input:checked+.slider:before {
      background-color: #0080008a;
    }

    input:focus+.slider {
      box-shadow: 0 0 1px #2196F3;
    }

    input:checked+.slider:before {
      -webkit-transform: translateX(35px);
      -ms-transform: translateX(35px);
      transform: translateX(35px);
    }

    /* Rounded sliders */
    .slider.round {
      border-radius: 34px;
    }

    .slider.round:before {
      border-radius: 50%;
    }
    * {
            margin: 0;
            padding: 0;
        }

        body {
            background: #f9f9f9;
            color: #666;
            font: 11px/14px Arial, Helvetica, sans-serif;
        }

        .color-wrapper {
            background-color: #fff;
            border: 1px solid rgba(0, 0, 0, 0.15);
            padding: .375rem .75rem;
            font-size: 1rem;
            line-height: 1.5;
            border-radius: .25rem;
            display: flex;
        }

        input.call-picker {
            border: 1px solid #AAA;
            color: #666;
            text-transform: uppercase;
            float: left;
            outline: none;
            padding: 10px;
            text-transform: uppercase;
            width: 85px;
        }

        .color-picker {
            width: auto;
            background: #F3F3F3;
            height: 120px;
            padding: 10px;
            overflow: auto;
            box-shadow: 0px 0px 1px 1px #DDD;
        }

        .color-holder {
            background: #fff;
            cursor: pointer;
            border: 1px solid #AAA;
            width: 95%;
            float: left;
            border: 1px dotted gray;
            height: 24px;
        }

        .drop-sign {
            width: 34px;
        }

        .drop-sign::after {
            display: inline-block;
            margin-left: 17px;
            margin-top: 10px;
            vertical-align: .255em;
            content: "";
            border-top: .4em solid;
            border-right: .4em solid transparent;
            border-bottom: 0;
            border-left: .4em solid transparent;
        }

        .color-picker-content {
            float: left;
            margin-left: 2px;
            margin-right: 2px;
            margin-bottom: 5px;
        }

        .color-picker .color-item:hover::before {
            content: "\2713";
            z-index: 100;
            color: white;
            margin-left: 15px;
        }

        .color-picker .color-item {
            cursor: pointer;
            width: 40px;
            height: 25px;
            list-style-type: none;
        }
  </style>
</head>

<body>
  <div class="container mt-3">
    <ul class="nav nav-tabs" role="tablist">
      <li role="presentation" class="active">
        <a href="#builder" role="tab" data-toggle="tab">Builder</a>
      </li>
      <li role="presentation">
        <a href="#form" role="tab" data-toggle="tab">Form</a>
      </li>
      <li role="presentation">
        <a href="#result" role="tab" data-toggle="tab">Result</a>
      </li>
    </ul>
    <div class="tab-content container">
      <div class="tab-pane fade in active" id="builder" role="tabpanel">
        <div id="formio-builder"></div>
      </div>
      <div class="tab-pane fade" id="form" role="tabpanel">
        <pre><code class="language-javascript"></code></pre>
      </div>
      <div class="tab-pane fade" id="result" role="tabpanel">
        <div id="formio-form">
          Form not initialized
        </div>
      </div>
    </div>

  </div>
</body>
<script>
  $('body').click(function () {
        $('.color-picker').fadeOut();
        $('.color-picker-content').remove();
    });
  function myfunc(tab) {
        console.log(tab);
        var colorList = [
            '255, 22, 84',
            '36, 123, 160',
            '112, 193, 179',
            '146, 179, 0',
            '203, 177, 219',
            '193, 191, 112',
            '0,0,128',
            '0,128,128',
            '128,0,128',
            '0,128,0',
            '128,128,0',
            '128,0,0',
            '128,128,128',
            '192,192,192',
            '255,0,255',
            '0,255,255',
            '255,255,0',
            '0,0,255',
            '0,255,0',
            '255,0,0',
            '0,0,0',
            '0,102,102',
            '102,102,0',
            '102,0,102'
        ];

        // $('.color-picker').fadeOut();
        $('.color-picker-content').remove();
        var picker = tab.parent().find('.color-picker');

        for (var i = 0; i < colorList.length; i++) {
            picker.append('<div class="color-picker-content"><li class="color-item" data-hex="' + 'rgba(' + colorList[i] + ',1)" style="background-color:' + 'rgba(' + colorList[i] + ',1);"></li><li class="color-item" data-hex="' + 'rgba(' + colorList[i] + ',0.8)" style="background-color:' + 'rgba(' + colorList[i] + ',0.8);"></li><li class="color-item" data-hex="' + 'rgba(' + colorList[i] + ',0.6)" style="background-color:' + 'rgba(' + colorList[i] + ',0.6);"></li><li class="color-item" data-hex="' + 'rgba(' + colorList[i] + ',0.4)" style="background-color:' + 'rgba(' + colorList[i] + ',0.4);"></li><li class="color-item" data-hex="' + 'rgba(' + colorList[i] + ',0.2)" style="background-color:' + 'rgba(' + colorList[i] + ',0.2);"></li></div>');
        }
        event.stopPropagation();
        picker.fadeIn();
        picker.find('li').hover(function () {
            var codeHex = $(this).data('hex');
            $(this).parent().parent().parent().find('.color-holder').css('background-color', codeHex);
            $(this).parent().parent().parent().find('input').val(codeHex);
        });
        picker.find('li').mouseleave(function () {

            $(this).parent().parent().parent().find('.color-holder').css('background-color', 'white');
        });

        picker.find('li').click(function () {
            var codeHex = $(this).data('hex');
            $(this).parent().parent().parent().find('.color-holder').css('background-color', codeHex);
            $(this).parent().parent().parent().find('input').val(codeHex);

        });
    }

  // Initialize the formio builder configuration (optional)
  // Default cartegories: basic, advanced, layout, data
  const options = {
    builder: {
      basic: {
        // We can change the title of a category...
        title: 'Basic'
      },
      advanced: {
        title: 'Advanced'
      },
      layout: {
        // ... or change its position...
        title: 'Layout'
      },
      data: {
        // ... or change its position...
        title: 'Data'
      },

      // ... and even create custom categories
      custom: {
        title: 'Custom',
        weight: 100,
        components: {

          toggle: {
            title: 'Toggle Switch',
            key: 'frm001_toggle',
            icon: 'fa fa-toggle-on',
            schema: {
              "label": "HTML",
              "tag": "div",
              "className": "",
              "attrs": [],
              "content": "\r\n<div class=\"toggle-switch\">\r\n\t<label class=\"control-label\" style=\"\">Active</label><br/>\r\n\t<label class=\"switch\">\r\n\r\n\t  <input type=\"checkbox\" checked>\r\n\t  <span class=\"slider round\"></span>\r\n\t</label>\r\n</div>",
              "refreshOnChange": false,
              "mask": false,
              "tableView": true,
              "alwaysEnabled": false,
              "type": "htmlelement",
              "input": false,
              "key": "html",
              "placeholder": "",
              "prefix": "",
              "customClass": "",
              "suffix": "",
              "multiple": false,
              "defaultValue": null,
              "protected": false,
              "unique": false,
              "persistent": false,
              "hidden": false,
              "clearOnHide": true,
              "dataGridLabel": false,
              "labelPosition": "top",
              "labelWidth": 30,
              "labelMargin": 3,
              "description": "",
              "errorLabel": "",
              "tooltip": "",
              "hideLabel": false,
              "tabindex": "",
              "disabled": false,
              "autofocus": false,
              "dbIndex": false,
              "customDefaultValue": "",
              "calculateValue": "",
              "allowCalculateOverride": false,
              "widget": null,
              "refreshOn": "",
              "clearOnRefresh": false,
              "validateOn": "change",
              "validate": {
                "required": false,
                "custom": "",
                "customPrivate": false
              },
              "conditional": {
                "show": null,
                "when": null,
                "eq": ""
              },
            }
          },

          phoneNumber: {
            title: 'Mobile Phone',
            key: 'frm001_mobile',
            icon: 'fa fa-phone-square',
            schema: {
              label: 'Mobile Phone',
              type: 'phoneNumber',
              key: 'frm001_mobile',
              input: true
            }
          }
        }
      },
    }
  };


  // Initialize the form.io form JSON object
  const form = {
    components: [
      {
        key: 'textfield',
        type: 'textfield',
        validate: {
          required: true
        }
      },
      {
        key: 'datetime',
        type: 'datetime'
      },
      {
        key: 'submit',
        type: 'button',
        theme: 'primary'
      }
    ]
  };

  const formio = {
    builder: null,
    form: null
  };

  // Initialize the formio form instance
  Formio.createForm(document.getElementById('formio-form'), form)
    .then((instance) => {
      formio.form = instance;
    });

  // Initialize the formio builder instance
  Formio.builder(document.getElementById('formio-builder'), form, options)
    .then((instance) => {
      formio.builder = instance;
      // Define the on render event of the formio builder instance
      formio.builder.on('render', () => {
        // Update the formio form object and re render the form
        formio.form.form = form;
        formio.form.render();

        // Update the json code using Prism.js
        document.querySelector('code').innerHTML = Prism.highlight(JSON.stringify(form, null, 2), Prism.languages.json, 'json');
      });
      document.querySelector('code').innerHTML = Prism.highlight(JSON.stringify(form, null, 2), Prism.languages.json, 'json');
    });



</script>

</html>